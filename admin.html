<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - DocApoint</title>

    <!-- CSS Files -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/skins/color-1.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">


    <!-- Style Switcher -->
    <link rel="stylesheet" href="css/skins/color-1.css" class="alternate-style" title="color-1" disabled>


    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">

    <link rel="stylesheet" href="css/style-switcher.css">


    <link rel="stylesheet" href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css">
</head>

<body>
    <!-- <div class="main-container">
        <h1 id="docClinic"></h1>
        <h2 id="docName"></h2>
    </div> -->

    <!-- Main Container -->
    <div class="main-container">
        <!-- Aside -->
        <div class="aside">
            <div class="logo">
                <a href="#"><span>Doc</span>Apoint</a>
            </div>

            <div class="nav-toggler">
                <span>

                </span>
            </div>

            <ul class="my-nav">
                <li><a href="#home" class="active"><i class="fa fa-home"></i>Home</a></li>
                <li><a href="#manage-doctors"><i class="fa fa-user-md"></i>Doctors</a></li>
                <li><a href="#profile"><i class="fa fa-user"></i>Profile</a></li>
            </ul>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Home Section -->
            <section class="home active section" id="home">
                <div class="container">
                    <div class="row">
                        <div class="home-info padd-15">
                            <h3 class="hello">üëãüèº Welcome <span class="name" id="docName"></span></h3>

                            <!-- Slider -->
                            <div class="px-4 py-5">
                                <div id="carouselExampleAutoplaying" class="carousel slide" data-bs-ride="carousel">
                                    <div class="carousel-inner">
                                        <div class="carousel-item active slider">
                                            <img src="images/slider_images/1.jpeg" class="d-block w-100" alt="Image">
                                        </div>
                                        <div class="carousel-item slider">
                                            <img src="images/slider_images/2.jpeg" class="d-block w-100" alt="Image">
                                        </div>
                                        <div class="carousel-item slider">
                                            <img src="images/slider_images/3.jpeg" class="d-block w-100" alt="Image">
                                        </div>
                                        <div class="carousel-item slider">
                                            <img src="images/slider_images/4.jpeg" class="d-block w-100" alt="Image">
                                        </div>
                                        <div class="carousel-item slider">
                                            <img src="images/slider_images/5.jpeg" class="d-block w-100" alt="Image">
                                        </div>
                                        <div class="carousel-item slider">
                                            <img src="images/slider_images/6.jpeg" class="d-block w-100" alt="Image">
                                        </div>
                                        <div class="carousel-item slider">
                                            <img src="images/slider_images/7.jpeg" class="d-block w-100" alt="Image">
                                        </div>
                                        <div class="carousel-item slider">
                                            <img src="images/slider_images/8.jpeg" class="d-block w-100" alt="Image">
                                        </div>
                                        <div class="carousel-item slider">
                                            <img src="images/slider_images/9.jpeg" class="d-block w-100" alt="Image">
                                        </div>
                                        <div class="carousel-item slider">
                                            <img src="images/slider_images/10.jpeg" class="d-block w-100" alt="Image">
                                        </div>
                                    </div>
                                    <button class="carousel-control-prev" type="button"
                                        data-bs-target="#carouselExampleAutoplaying" data-bs-slide="prev">
                                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                        <span class="visually-hidden">Previous</span>
                                    </button>
                                    <button class="carousel-control-next" type="button"
                                        data-bs-target="#carouselExampleAutoplaying" data-bs-slide="next">
                                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                        <span class="visually-hidden">Next</span>
                                    </button>
                                </div>
                            </div>

                            <h3 class="my-profession">DocApoint provides you <span class="typing">Online Appointment
                                    Service</span></h3>


                            <p>Streamline your healthcare journey with our intuitive online appointment system. Browse a
                                diverse array of doctors,
                                select your preferred specialist, and secure your appointment in just a few clicks. Say
                                goodbye to long wait times and
                                phone queues. With secure online payments, booking is seamless and hassle-free.
                                Prioritize your well-being ‚Äì experience
                                the ease of modern healthcare today.</p>

                            <!-- Appointment card for user -->
                            <div class="container px-4 py-5 feature-style margin-bottom" id="feature">
                                <h2 class="pb-2 border-bottom">Appointment</h2>
                                <div class="row g-4 py-5">
                                    <div class="col d-flex align-items-start">
                                        <div
                                            class="icon-square text-body-emphasis bg-body-secondary d-inline-flex align-items-center justify-content-center fs-4 flex-shrink-0 me-3">
                                        </div>
                                        <div>
                                            <h3 class="fs-2">Admin</h3>
                                            <p class="g-font2 justify-text">Discover a seamless way to schedule
                                                appointments with trusted healthcare professionals. Browse a diverse
                                                range of
                                                doctors, choose your preferred specialist, and book effortlessly.</p>
                                            <a href="#manage-doctors" class="btn btn-danger doctor-management"
                                                data-section-index="1">Manage Doctors</a>
                                        </div>
                                    </div>

                                </div>
                            </div>


                            <!-- FAQ's -->
                            <div class="row">
                                <h1 style="color: var(--skin-color);">FAQs</h1>
                            </div>
                            <div class="accordion" id="accordionExample">
                                <div class="accordion-item py-3 rounded-4 my-3"
                                    style="color: var(--text-black-900); background-color: var(--bg-black-100); border: 1px solid var(--bg-black-50);">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true"
                                            aria-controls="collapseOne"
                                            style="color: var(--text-black-900); background-color: var(--bg-black-100);">
                                            <strong>How do I book an appointment with a doctor?</strong>

                                        </button>
                                    </h2>
                                    <div id="collapseOne" class="accordion-collapse collapse"
                                        data-bs-parent="#accordionExample">
                                        <div class="accordion-body justify-text">
                                            To book an appointment, simply visit our website, browse available doctors,
                                            select the one you need, and click on the
                                            "Book Appointment" button. Follow the prompts to complete the process.
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-item py-3 rounded-4 my-3"
                                    style="color: var(--text-black-900); background-color: var(--bg-black-100); border: 1px solid var(--bg-black-50);">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapseTwo"
                                            aria-expanded="false" aria-controls="collapseTwo"
                                            style="color: var(--text-black-900); background-color: var(--bg-black-100);">
                                            <strong>Can I see a doctor's availability before booking?</strong>
                                        </button>
                                    </h2>
                                    <div id="collapseTwo" class="accordion-collapse collapse"
                                        data-bs-parent="#accordionExample">
                                        <div class="accordion-body justify-text">
                                            Yes, you can view a doctor's available time slots, allowing you to choose a
                                            convenient appointment time that fits your
                                            schedule.
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-item py-3 rounded-4 my-3"
                                    style="color: var(--text-black-900); background-color: var(--bg-black-100); border: 1px solid var(--bg-black-50);">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapseThree"
                                            aria-expanded="false" aria-controls="collapseThree"
                                            style="color: var(--text-black-900); background-color: var(--bg-black-100);">
                                            <strong>Is my payment information secure?</strong>
                                        </button>
                                    </h2>
                                    <div id="collapseThree" class="accordion-collapse collapse"
                                        data-bs-parent="#accordionExample">
                                        <div class="accordion-body justify-text">
                                            Absolutely. We prioritize your security. We use industry-standard encryption
                                            and
                                            secure payment gateways to protect your
                                            financial information.
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-item py-3 rounded-4 my-3"
                                    style="color: var(--text-black-900); background-color: var(--bg-black-100); border: 1px solid var(--bg-black-50);">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapseFour"
                                            aria-expanded="false" aria-controls="collapseFour"
                                            style="color: var(--text-black-900); background-color: var(--bg-black-100);">
                                            <strong>What if I need to cancel or reschedule my appointment?</strong>
                                        </button>
                                    </h2>
                                    <div id="collapseFour" class="accordion-collapse collapse"
                                        data-bs-parent="#accordionExample">
                                        <div class="accordion-body justify-text">
                                            You can easily cancel or reschedule appointments through your account on our
                                            platform. Just log in, navigate to your
                                            appointments, and follow the instructions.
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-item py-3 rounded-4 my-3"
                                    style="color: var(--text-black-900); background-color: var(--bg-black-100); border: 1px solid var(--bg-black-50);">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapseFive"
                                            aria-expanded="false" aria-controls="collapseFive"
                                            style="color: var(--text-black-900); background-color: var(--bg-black-100);">
                                            <strong>Do I need to create an account to book an appointment?</strong>
                                        </button>
                                    </h2>
                                    <div id="collapseFive" class="accordion-collapse collapse"
                                        data-bs-parent="#accordionExample">
                                        <div class="accordion-body justify-text">
                                            While it's not mandatory, creating an account offers benefits such as easy
                                            appointment management and access to your
                                            appointment history.
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-item py-3 rounded-4 my-3"
                                    style="color: var(--text-black-900); background-color: var(--bg-black-100); border: 1px solid var(--bg-black-50);">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapseSix"
                                            aria-expanded="false" aria-controls="collapseSix"
                                            style="color: var(--text-black-900); background-color: var(--bg-black-100);">
                                            <strong>Can I review a doctor's qualifications and patient reviews?</strong>
                                        </button>
                                    </h2>
                                    <div id="collapseSix" class="accordion-collapse collapse"
                                        data-bs-parent="#accordionExample">
                                        <div class="accordion-body justify-text">
                                            Yes, you can view a doctor's profile, including their qualifications,
                                            specialties, and patient reviews, to make an
                                            informed choice.
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-item py-3 rounded-4 my-3"
                                    style="color: var(--text-black-900); background-color: var(--bg-black-100); border: 1px solid var(--bg-black-50);">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapseSeven"
                                            aria-expanded="false" aria-controls="collapseSeven"
                                            style="color: var(--text-black-900); background-color: var(--bg-black-100);">
                                            <strong>What if I have a medical emergency?</strong>
                                        </button>
                                    </h2>
                                    <div id="collapseSeven" class="accordion-collapse collapse"
                                        data-bs-parent="#accordionExample">
                                        <div class="accordion-body justify-text">
                                            In the case of a medical emergency, please call 112 or visit your nearest
                                            emergency room. Our platform is for
                                            non-emergency appointments.
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-item py-3 rounded-4 my-3"
                                    style="color: var(--text-black-900); background-color: var(--bg-black-100); border: 1px solid var(--bg-black-50);">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapseEight"
                                            aria-expanded="false" aria-controls="collapseEight"
                                            style="color: var(--text-black-900); background-color: var(--bg-black-100);">
                                            <strong>Do you offer telemedicine appointments?</strong>
                                        </button>
                                    </h2>
                                    <div id="collapseEight" class="accordion-collapse collapse"
                                        data-bs-parent="#accordionExample">
                                        <div class="accordion-body justify-text">
                                            Yes, some doctors on our platform offer telemedicine appointments. You can
                                            specify your preference when booking.
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-item py-3 rounded-4 my-3"
                                    style="color: var(--text-black-900); background-color: var(--bg-black-100); border: 1px solid var(--bg-black-50);">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button collapsed" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapseNine"
                                            aria-expanded="false" aria-controls="collapseNine"
                                            style="color: var(--text-black-900); background-color: var(--bg-black-100);">
                                            <strong>What happens if the doctor I've booked is unavailable on the day of
                                                my
                                                appointment?</strong>
                                        </button>
                                    </h2>
                                    <div id="collapseNine" class="accordion-collapse collapse"
                                        data-bs-parent="#accordionExample">
                                        <div class="accordion-body justify-text">
                                            While rare, if a doctor becomes unavailable, we will work to reschedule your
                                            appointment with another qualified
                                            healthcare provider or offer a refund if rescheduling isn't possible.
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <!-- footer -->
                            <div class="mt-auto footer-style">
                                <div class="container">
                                    <footer class="d-flex flex-wrap justify-content-between align-items-center py-3"
                                        style="border-top: 2px solid var(--text-black-900);">
                                        <div class="col-md-4 d-flex align-items-center">
                                            <span class="mb-3 mb-md-0 text-body-secondary g-font1 fw-bold fs-4">
                                                <p style="color: var(--skin-color); font-family: 'Titillium Web';">¬©
                                                    2023
                                                    DocApoint, Inc</p>
                                                <p
                                                    style="color: var(--text-black-700); font-weight: 400; font-family: 'Titillium Web';">
                                                    xyz@gmail.com<br>+91 0000000000</p>
                                            </span>
                                        </div>

                                        <ul class="nav col-md-4 justify-content-end list-unstyled d-flex">
                                            <li class="ms-3"><a class="text-body-secondary white-icon " href="#"><img
                                                        src="images/icon/twitter.png" alt="" width="40px"></a></li>
                                            <li class="ms-3"><a class="text-body-secondary white-icon " href="#"><img
                                                        src="images/icon/facebook.png" alt="" width="40px"></a></li>
                                            <li class="ms-3"><a class="text-body-secondary white-icon " href="#"><img
                                                        src="images/icon/instagram.png" alt="" width="40px"></a></li>
                                            <li class="ms-3"><a class="text-body-secondary white-icon " href="#"><img
                                                        src="images/icon/whatsapp.png" alt="" width="40px"></a></li>
                                        </ul>
                                    </footer>
                                </div>
                            </div>
                        </div>
                    </div>



                </div>
            </section>

            <!-- Manage Doctor Section -->
            <section class="section" id="manage-doctors">
                <div class="container">
                    <div class="row">
                        <div class="section-title padd-15">
                            <h2>Manage Doctors</h2>
                        </div>
                    </div>

                    <div class="d-grid gap-3 col-6 mx-auto">
                        <button class="my_btn" onclick="showModal2()">Register Doctor</button>
                    </div>

                    <!-- Dropdown list -->
                    <div class="dropdown-container">
                        <select id="doctorDropdown" class="dropdown-button"></select>
                    </div>


                    <!-- Table -->
                    <div class="container table-responsive">
                        <table class="table">
                            <thead>
                                <th>S. no</th>
                                <th>Patient Name</th>
                                <th>Appointment ID</th>
                                <th>Phone</th>
                                <th>Age</th>
                                <th>Address</th>
                                <th>Time</th>
                                <th>Date</th>
                            </thead>

                            <tbody id="tbody1">

                            </tbody>
                        </table>
                    </div>




                    <!-- Register Form -->
                    <div class="overlay2" onclick="closeModal2()"></div>

                    <div class="register-form2">
                        <span class="close2">&times;</span>

                        <form id="doctorRegisterForm">
                            <div>
                                <input type="text" name="" id="doctor-name" placeholder="Enter Your Name" required>
                            </div>

                            <div>
                                <input type="text" name="" id="doctor-number" placeholder="Enter Mobile Number"
                                    required>
                            </div>

                            <div>
                                <input type="text" name="" id="doctor-clinic" placeholder="Enter Clinic Name" required>
                            </div>

                            <div>
                                <input type="text" name="" id="doctor-qualification"
                                    placeholder="Enter Your Qualification" required>
                            </div>

                            <div>
                                <input type="text" name="" id="doctor-specialties" placeholder="Enter Your Specialties"
                                    required>
                            </div>

                            <div>
                                <input type="text" name="" id="doctor-address" placeholder="Enter Your Address"
                                    required>
                            </div>

                            <div>
                                <input type="password" name="" id="doctor-password" placeholder="Create a Password"
                                    required>
                            </div>

                            <button type="submit" class="my_btn" id="registerDoctor">Register</button>

                            <div class="register-alert-message" style="margin-top: 10px;">üòä Doctor Has Registered
                                Successfully!</div>
                            <div class="register-alert-message2" style="margin-top: 10px;">‚ö†Ô∏è Please Fill All The
                                Fields!</div>

                        </form>
                    </div>


                    <!-- footer -->
                    <div class="mt-auto footer-style">
                        <div class="container">
                            <footer class="d-flex flex-wrap justify-content-between align-items-center py-3"
                                style="border-top: 2px solid var(--text-black-900);">
                                <div class="col-md-4 d-flex align-items-center">
                                    <span class="mb-3 mb-md-0 text-body-secondary g-font1 fw-bold fs-4">
                                        <p style="color: var(--skin-color); font-family: 'Titillium Web';">¬© 2023
                                            DocApoint,
                                            Inc</p>
                                        <p
                                            style="color: var(--text-black-700); font-weight: 400; font-family: 'Titillium Web';">
                                            xyz@gmail.com<br>+91 0000000000</p>
                                    </span>
                                </div>

                                <ul class="nav col-md-4 justify-content-end list-unstyled d-flex">
                                    <li class="ms-3"><a class="text-body-secondary white-icon " href="#"><img
                                                src="images/icon/twitter.png" alt="" width="40px"></a></li>
                                    <li class="ms-3"><a class="text-body-secondary white-icon " href="#"><img
                                                src="images/icon/facebook.png" alt="" width="40px"></a></li>
                                    <li class="ms-3"><a class="text-body-secondary white-icon " href="#"><img
                                                src="images/icon/instagram.png" alt="" width="40px"></a></li>
                                    <li class="ms-3"><a class="text-body-secondary white-icon " href="#"><img
                                                src="images/icon/whatsapp.png" alt="" width="40px"></a></li>
                                </ul>
                            </footer>
                        </div>
                    </div>

                </div>
            </section>

            <!-- Profile Section -->
            <section class="about section" id="profile">
                <div class="container">
                    <div class="row">
                        <div class="section-title padd-15">
                            <h2>Profile</h2>
                        </div>
                    </div>


                </div>
            </section>
        </div>

    </div>




    <!-- Style Switcher -->
    <div class="style-switcher" style="top: 10px;">
        <div class="day-night s-icon" style="top: 0px;">
            <i class="fas"></i>
        </div>
    </div>


    <!-- For Local Storage -->
    <!-- <script>
        // Retrieve doctor name from local storage
        const doctorName = localStorage.getItem('name');

        // Check if there is stored doctor name
        if (doctorName) {
            const data = JSON.parse(doctorName);
            document.getElementById("docName").innerHTML = data;
        }

        // Retrieve doctor name from local storage
        // const doctorClinic = localStorage.getItem('clinic');

        // Check if there is stored doctor name
        // if (doctorClinic) {
        //     const data = JSON.parse(doctorClinic);
        //     document.getElementById("docClinic").innerHTML = data;
        // }

    </script> -->

    <!-- Javascript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/typed.js/2.0.16/typed.umd.js"
        integrity="sha512-+2pW8xXU/rNr7VS+H62aqapfRpqFwnSQh9ap6THjsm41AxgA0MhFRtfrABS+Lx2KHJn82UOrnBKhjZOXpom2LQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="js/admin_script.js"></script>
    <script src="js/style-switcher.js"></script>
    <!-- Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>


    <!-- For Firebase -->

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.2/firebase-app.js";
        import { getFirestore, setDoc, addDoc, doc, collection, getDocs, onSnapshot, query, where } from "https://www.gstatic.com/firebasejs/10.5.2/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCKpnoJWlRU9FIG8M9dt9myuEvKsQZsaI4",
            authDomain: "docapoint-948f9.firebaseapp.com",
            databaseURL: "https://docapoint-948f9-default-rtdb.firebaseio.com",
            projectId: "docapoint-948f9",
            storageBucket: "docapoint-948f9.appspot.com",
            messagingSenderId: "153021935171",
            appId: "1:153021935171:web:f9f724b2715b12213baef6"
        };

        const app = initializeApp(firebaseConfig);

        const db = getFirestore(app);

        // For local storage
        // Retrieve doctor name from local storage
        const doctorName = localStorage.getItem('adminName');

        // Check if there is stored doctor name
        if (doctorName) {
            const data = JSON.parse(doctorName);
            document.getElementById("docName").innerHTML = data;
        }



        // To encrypt or decrypt password
        const crypt = (salt, text) => {
            const textToChars = (text) => text.split("").map((c) => c.charCodeAt(0));
            const byteHex = (n) => ("0" + Number(n).toString(16)).substr(-2);
            const applySaltToChar = (code) => textToChars(salt).reduce((a, b) => a ^ b, code);

            return text
                .split("")
                .map(textToChars)
                .map(applySaltToChar)
                .map(byteHex)
                .join("");
        };

        const decrypt = (salt, encoded) => {
            const textToChars = (text) => text.split("").map((c) => c.charCodeAt(0));
            const applySaltToChar = (code) => textToChars(salt).reduce((a, b) => a ^ b, code);
            return encoded
                .match(/.{1,2}/g)
                .map((hex) => parseInt(hex, 16))
                .map(applySaltToChar)
                .map((charCode) => String.fromCharCode(charCode))
                .join("");
        };


        // function to store data of doctors who will register on DocApoint platform
        registerDoctor.addEventListener('click', (e) => {
            e.preventDefault();

            var doctorName = document.getElementById('doctor-name').value;
            var doctorNumber = document.getElementById('doctor-number').value;
            var doctorClinic = document.getElementById('doctor-clinic').value;
            var doctorQualification = document.getElementById('doctor-qualification').value;
            var doctorSpecialties = document.getElementById('doctor-specialties').value;
            var doctorAddress = document.getElementById('doctor-address').value;
            var doctorPassword = document.getElementById('doctor-password').value;
            var type = "Doctor";

            var encryptPass = crypt(doctorPassword, doctorPassword);

            if (
                doctorName.trim() !== '' &&
                doctorNumber.trim() !== '' &&
                doctorClinic.trim() !== '' &&
                doctorQualification.trim() !== '' &&
                doctorSpecialties.trim() !== '' &&
                doctorAddress.trim() !== '' &&
                doctorPassword.trim() !== ''
            ) {
                addDoc(collection(db, "doctors"), {
                    doctorName: doctorName,
                    doctorNumber: doctorNumber,
                    doctorClinic: doctorClinic,
                    doctorQualification: doctorQualification,
                    doctorSpecialties: doctorSpecialties,
                    doctorAddress: doctorAddress,
                    doctorPassword: encryptPass,
                    type: type
                });


                // show submit message
                document.querySelector('.register-alert-message').style.display = 'block';

                // remove submit message
                setTimeout(() => {
                    document.querySelector('.register-alert-message').style.display = 'none';

                    // reset the form
                    document.getElementById('doctorRegisterForm').reset();
                }, 3000);
            } else {
                // Handle the case where required fields are empty (e.g., show an error message)
                // show alert message
                document.querySelector('.register-alert-message2').style.display = 'block';

                // remove alert message
                setTimeout(() => {
                    document.querySelector('.register-alert-message2').style.display = 'none';
                }, 3000);
            }
        });

        var doctorList = []; // The list to store all registered doctors

        const getRegisteredDoctors = async () => {
            const appointmentsCollection = collection(db, "doctors");
            try {
                onSnapshot(query(appointmentsCollection, where('type', '==', "Doctor")), (querySnapshot) => {
                    doctorList = querySnapshot.docs.map((doc) => {
                        const data = doc.data();
                        return data.doctorName;
                    });

                    console.log(doctorList);

                    // Update the dropdown options
                    updateDropdown(doctorList);

                    if (doctorList.length != 0) {
                        document.querySelector('.dropdown-container').style.display = 'flex';
                    }
                });
            } catch (error) {
                console.error("Error getting documents: ", error);
            }
        };


        const updateDropdown = (doctors) => {
            const dropdown = document.getElementById("doctorDropdown");

            // Clear existing options
            dropdown.innerHTML = "";

            // Add new options based on the doctors list
            doctors.forEach((doctor) => {
                const option = document.createElement("option");
                option.classList.add("dropdown-option");
                option.value = doctor;
                option.text = doctor;
                dropdown.add(option);
            });
        };


        getRegisteredDoctors();





        const doctorDropdown = document.getElementById('doctorDropdown');

        // Event listener for dropdown change
        doctorDropdown.addEventListener('change', () => {
            // Get the selected doctor name from the dropdown
            const selectedName = doctorDropdown.value;

            // Call the function to fetch appointments data based on the selected doctor name
            getAppointmentsData(selectedName);
        });



        const getAppointmentsData = async (selectedName) => {
             // getting current date
            const currentDate = new Date();

            // Get the components of the date
            const year = currentDate.getFullYear();
            const month = String(currentDate.getMonth() + 1).padStart(2, '0'); // Months are zero-based
            const day = String(currentDate.getDate()).padStart(2, '0');

            // Format the date as "yyyy-mm-dd"
            const currentFormattedDate = `${year}-${month}-${day}`;
            
            const appointmentsCollection = collection(db, "appointments");
            try {
                onSnapshot(query(appointmentsCollection, where('doctorName', '==', selectedName), where('date', '==', currentFormattedDate)), (querySnapshot) => {
                    var users = [];

                    querySnapshot.forEach((doc) => {
                        users.push(doc.data());
                    });

                    console.log(users);

                    // Updating the table or any other part of UI here
                    addAllItemsToTheTable(users);
                });
            } catch (error) {
                console.log("Error getting documents: ", error);
            }
        };

        // getAppointmentsData();




        // Filling data in table
        var stdNo = 0;
        var tBody = document.getElementById('tbody1');


        function addItemToTable(name, appointment_id, phone, age, address, time, date) {

            var trow = document.createElement('tr');
            var td1 = document.createElement('td');
            var td2 = document.createElement('td');
            var td3 = document.createElement('td');
            var td4 = document.createElement('td');
            var td5 = document.createElement('td');
            var td6 = document.createElement('td');
            var td7 = document.createElement('td');
            var td8 = document.createElement('td');


            td1.innerHTML = ++stdNo;
            td2.innerHTML = name;
            td3.innerHTML = appointment_id;
            td4.innerHTML = phone;
            td5.innerHTML = age;
            td6.innerHTML = address;
            td7.innerHTML = time;
            td8.innerHTML = date;


            trow.appendChild(td1);
            trow.appendChild(td2);
            trow.appendChild(td3);
            trow.appendChild(td4);
            trow.appendChild(td5);
            trow.appendChild(td6);
            trow.appendChild(td7);
            trow.appendChild(td8);

            if (stdNo % 2 == 1) {
                trow.classList.add("table-row");
            }

            tBody.appendChild(trow);
        }

        function addAllItemsToTheTable(UsersDocList) {
            stdNo = 0;
            tBody.innerHTML = "";

            UsersDocList.forEach(element => {
                addItemToTable(element.name, element.appointment_id, element.phone, element.age, element.address, element.time, element.date)
            });
        }

        // Call the function to start listening for real-time updates
        getAppointmentsData();


    </script>
</body>

</html>